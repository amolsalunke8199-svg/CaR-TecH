<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Car Tec</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { background:#000; color:#fff; font-family: Arial; }
    .grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:15px; padding:20px; }
    .card { border:1px solid gold; padding:10px; border-radius:10px; }
    img { width:100%; height:180px; object-fit:cover; border-radius:8px; }
    h3 { color:gold; margin:5px 0; }
    .btn { display:block; background:gold; color:black; text-align:center; padding:8px; margin-top:8px; text-decoration:none; border-radius:5px; }
  </style>
</head>
<body>

<h1 style="text-align:center;color:gold;">Car Tec</h1>

<div id="cars" class="grid"></div>

<script>
const sheetId = "1zufeYzIw7mniERHlKTzwMsgVakngr_C8ty-6YJTT1hY";
const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json`;

function driveImg(link){
  if(!link) return "";
  const m = link.match(/\/d\/(.*?)\//);
  return m ? `https://drive.google.com/uc?export=view&id=${m[1]}` : link;
}

fetch(url)
.then(res => res.text())
.then(txt => {
  const json = JSON.parse(txt.substr(47).slice(0,-2));
  const rows = json.table.rows;

  rows.forEach(r => {
    const data = r.c.map(c => c ? c.v : "");

    const name = data[1];      // car name
    const img  = driveImg(data[9]); // Column J = index 9

    if(!name) return;

    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <img src="${img}">
      <h3>${name}</h3>
      <a class="btn" target="_blank"
         href="https://wa.me/919527006593?text=I am interested in ${name}">
         WhatsApp
      </a>
    `;

    document.getElementById("cars").appendChild(card);
  });
});
</script>
